---
- name: Membuat File Postgres Repository
  file:
    path: "/etc/apt/sources.list.d/pgdg.list"
    state: "touch"

- name: Menambahkan Repository Postgresql
  blockinfile:
    path: "/etc/apt/sources.list.d/pgdg.list"
    block: |
      deb http://apt.postgresql.org/pub/repos/apt $(lsb_release -cs)-pgdg main

- name: Menambahkan GPG key Postgresql
  ansible.builtin.shell: |
    wget -qO- https://www.postgresql.org/media/keys/ACCC4CF8.asc | tee /etc/apt/trusted.gpg.d/pgdg.asc

- name: Perbaharui repository
  ansible.builtin.shell: |
    apt update